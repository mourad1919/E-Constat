<ion-header [style.visibility]="content_visibility"> 
  <ion-toolbar>
    <ion-title>
      Tab 2
    </ion-title>
  </ion-toolbar>
</ion-header>
<div class="scan-box" [style.visibility]="!content_visibility" ></div>
<ion-content class="ion-padding" [style.visibility]="content_visibility">
  <div class="flex justify-content-space-between ion-margin-top relative">
    <div class="absolute full-width line"></div>
    <div class="flex flex-column justify-content-center full-width"
      *ngFor="let slide of slides; let index = index; let first = first; let last = last;">
      <span [ngClass]="{ 'align-self-end': last, 'align-self-center': (!first && !last) }"
        class="flex flex-column align-items-center justify-content-center bold text-medium radius"
        style="width: 30px; height: 30px;"
        [style.background]="slide === currentSlide ? 'var(--ion-color-primary)':'var(--ion-color-light-shade)'"
        [style.color]="slide === currentSlide ? 'var(--ion-color-light)':'var(--ion-color-dark)'"
        [ngClass]="{ 'align-self-end': last, 'align-self-center': (!first && !last) }">
        {{ index + 1 }}
      </span>
      <span [style.color]="slide === currentSlide ? 'var(--ion-color-primary)':'var(--ion-color-medium)'"
        [ngClass]="{ 'align-self-end': last, 'align-self-center': (!first && !last) }"
        class="flex text-medium bold ion-margin-vertical">
        {{ slide }}
      </span>
    </div>
  </div>
  <ion-slides [options]="slidesOpts"  (ionSlideDidChange)="onSlideDidChange()" (ionSlideWillChange)="onSlideWillChange()">
    <ng-container *ngFor="let slide of slides">
      <ion-slide>
        <div *ngIf="slide==='Accident'">
          <ion-row>
            <ion-col>
              <ion-item>
                <ion-label position="floating">Accident Site</ion-label>
                <ion-input placeholder="Enter Accident Site" [(ngModel)]="constat.accidentSite" #test="ngModel" required minlength="3"></ion-input>
              </ion-item>
              <ion-text color="danger" *ngIf="test.invalid && (test.dirty || test.touched)">
                <span class="text-tiny">
                  Field required
                </span>
              </ion-text>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-item>
                <ion-label>Hurt people</ion-label>
                <ion-toggle slot="end" [(ngModel)]="constat.hurtPeople" (ngModelChange)="onHurtPeopleOn()"></ion-toggle>
              </ion-item>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-item>
                <ion-label>Material Damage Other Then A or B</ion-label>
                <ion-toggle slot="end" [(ngModel)]="constat.materialDamageOtherThenAorB"></ion-toggle>
              </ion-item>
            </ion-col>
          </ion-row>
          
        </div>
        <div *ngIf="slide==='Insurence company'">
          <ion-button id="open-modal" expand="block">Add witness</ion-button>
          <p>{{ message }}</p>
          <ion-modal trigger="open-modal" (willDismiss)="onWillDismiss($event)">
            <ng-template>
              <ion-header>
                <ion-toolbar>
                  <ion-buttons slot="start">
                    <ion-button (click)="cancel()">Cancel</ion-button>
                  </ion-buttons>
                  <ion-title>Welcome</ion-title>
                  <ion-buttons slot="end">
                    <ion-button (click)="confirm()" [strong]="true">Confirm</ion-button>
                  </ion-buttons>
                </ion-toolbar>
              </ion-header>
              <ion-content class="ion-padding">
                <ion-item>
                  <ion-label position="floating">First name</ion-label>
                  <ion-input placeholder="Enter witness First name" [(ngModel)]="witness.firstname"></ion-input>
                </ion-item>
                <ion-item>
                  <ion-label position="floating">Last name</ion-label>
                  <ion-input placeholder="Enter witness Last name" [(ngModel)]="witness.lastname"></ion-input>
                </ion-item>
                <ion-item>
                  <ion-label position="floating">Email</ion-label>
                  <ion-input placeholder="Enter witness Email" [(ngModel)]="witness.email"></ion-input>
                </ion-item>
                <ion-item>
                  <ion-label position="floating">Address</ion-label>
                  <ion-input placeholder="Enter witness Address" [(ngModel)]="witness.address"></ion-input>
                </ion-item>
                <ion-item>
                  <ion-label position="floating">Telephone input</ion-label>
                  <ion-input type="tel" placeholder="+216 11 111 111" [(ngModel)]="witness.phone"></ion-input>
                </ion-item>
                <ion-item>
                  <ion-label>Passenger with vehicule A</ion-label>
                  <ion-toggle slot="end" [(ngModel)]="witness.passenger"></ion-toggle>
                </ion-item>
                <ion-item>
                  <ion-label>Passenger with vehicule B</ion-label>
                  <ion-toggle slot="end"></ion-toggle>
                </ion-item>
              </ion-content>
            </ng-template>
          </ion-modal>
          <h1>Insurence company information of vehicule A</h1>
          <ion-row>
            <ion-col>
              <ion-item>
                <ion-label position="floating">Insurence Company Name</ion-label>
                <ion-input placeholder="Enter Insurence Company Name" [(ngModel)]="vehiculeInforamtion.insurenceCompanyInformation.insurenceCompanyName" #icn="ngModel" required minlength="2"></ion-input>
              </ion-item>
              <ion-text color="danger" *ngIf="icn.invalid && (icn.dirty || icn.touched)">
                <span class="text-tiny">
                  Field required
                </span>
              </ion-text>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-item>
                <ion-label position="floating">Insurance Contract Number</ion-label>
                <ion-input placeholder="Enter Insurance Contract Number" [(ngModel)]="vehiculeInforamtion.insurenceCompanyInformation.insuranceContractNumber" #iccn="ngModel" required minlength="10" maxlength="12"></ion-input>
              </ion-item>
              <ion-text color="danger" *ngIf="iccn.invalid && (iccn.dirty || iccn.touched)">
                <span class="text-tiny">
                  Field required
                </span>
              </ion-text>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-item>
                <ion-label position="floating">Agency Name</ion-label>
                <ion-input placeholder="Enter Agency Name" [(ngModel)]="vehiculeInforamtion.insurenceCompanyInformation.agencyName" #ican="ngModel" required minlength="2"> </ion-input>
              </ion-item>
              <ion-text color="danger" *ngIf="ican.invalid && (ican.dirty || ican.touched)">
                <span class="text-tiny">
                  Field required
                </span>
              </ion-text>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-item>
                <ion-label>Begin Date</ion-label>
                <ion-input
                  id="begindate"
                  class="ion-text-end"
                ></ion-input>
                <ion-popover trigger="begindate" size="cover">
                  <ng-template>
                    <ion-datetime
                      presentation="begindate"
                      [(ngModel)]="vehiculeInforamtion.insurenceCompanyInformation.begingDate"
                      locale="sl-SI" required 
                    ></ion-datetime>
                  </ng-template>
                </ion-popover>
              </ion-item>
              
            </ion-col>
          </ion-row>
          
          <ion-row>
            <ion-col>
              <ion-item>
                <ion-label>End Date</ion-label>
                <ion-input
                  id="enddate"
                  class="ion-text-end"
                ></ion-input>
                <ion-popover trigger="enddate" size="cover">
                  <ng-template>
                    <ion-datetime
                      presentation="enddate"
                      [(ngModel)]="vehiculeInforamtion.insurenceCompanyInformation.endDate"
                      locale="sl-SI" required #iced="ngModel"
                    ></ion-datetime>
                  </ng-template>
                </ion-popover>
              </ion-item>
              
            </ion-col>
          </ion-row>
        </div>
        <div *ngIf="slide==='Driver'">
          <h1>Driver Information A</h1>
          <ion-row>
            <ion-col>
              <ion-item>
                <ion-label position="floating">First name</ion-label>
                <ion-input placeholder="Enter driver First name" [(ngModel)]="vehiculeInforamtion.driverInformation.firstname" #difn="ngModel"></ion-input>
              </ion-item>
              <ion-text color="danger" *ngIf="difn.invalid && (difn.dirty || difn.touched)">
                <span class="text-tiny">
                  Field required
                </span>
              </ion-text>
            </ion-col>
            <ion-col>
              <ion-item>
                <ion-label position="floating">Last name</ion-label>
                <ion-input placeholder="Enter driver Last name" [(ngModel)]="vehiculeInforamtion.driverInformation.lastname" #diln="ngModel"></ion-input>
              </ion-item>
              <ion-text color="danger" *ngIf="diln.invalid && (diln.dirty || diln.touched)">
                <span class="text-tiny">
                  Field required
                </span>
              </ion-text>
            </ion-col>
          </ion-row>
          
          
          <ion-row>
            <ion-col>
              <ion-item>
                <ion-label position="floating">Address</ion-label>
                <ion-input placeholder="Enter driver Address" [(ngModel)]="vehiculeInforamtion.driverInformation.adress" #dia="ngModel"></ion-input>
              </ion-item>
              <ion-text color="danger" *ngIf="dia.invalid && (dia.dirty || dia.touched)">
                <span class="text-tiny">
                  Field required
                </span>
              </ion-text>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-item>
                <ion-label position="floating">Licence Number</ion-label>
                <ion-input placeholder="Enter driver Licence Number" [(ngModel)]="vehiculeInforamtion.driverInformation.licenceNumber" #dilnb="ngModel"></ion-input>
              </ion-item>
              <ion-text color="danger" *ngIf="dilnb.invalid && (dilnb.dirty || dilnb.touched)">
                <span class="text-tiny">
                  Field required
                </span>
              </ion-text>
            </ion-col>
          </ion-row>
          
          <ion-row>
            <ion-col>
              <ion-item>
                <ion-label>Licence Date</ion-label>
                <ion-input
                  id="licencedate"
                  class="ion-text-end"
                ></ion-input>
                <ion-popover trigger="licencedate" size="cover">
                  <ng-template>
                    <ion-datetime
                      presentation="licencedate"
                      [(ngModel)]="vehiculeInforamtion.driverInformation.licenceDate"
                      locale="sl-SI" required
                    ></ion-datetime>
                  </ng-template>
                </ion-popover>
              </ion-item>
              
            </ion-col>
          </ion-row>
        </div>
        <div *ngIf="slide==='Insured'">
          <h1>Insured Inforamation A</h1>
          <ion-row>
            <ion-col>
              <ion-item>
                <ion-label position="floating">First name</ion-label>
                <ion-input placeholder="Enter Insured First name" [(ngModel)]="vehiculeInforamtion.insuredInforamation.firstname" #iifn="ngModel"></ion-input>
              </ion-item>
              <ion-text color="danger" *ngIf="iifn.invalid && (iifn.dirty || iifn.touched)">
                <span class="text-tiny">
                  Field required
                </span>
              </ion-text>
            </ion-col>
            <ion-col>
              <ion-item>
                <ion-label position="floating">Last name</ion-label>
                <ion-input placeholder="Enter Insured Last name" [(ngModel)]="vehiculeInforamtion.insuredInforamation.lastname" #iiln="ngModel"></ion-input>
              </ion-item>
              <ion-text color="danger" *ngIf="iiln.invalid && (iiln.dirty || iiln.touched)">
                <span class="text-tiny">
                  Field required
                </span>
              </ion-text>
            </ion-col>
          </ion-row>
          
          
          <ion-row>
            <ion-col>
              <ion-item>
                <ion-label position="floating">Address</ion-label>
                <ion-input placeholder="Enter Insured Address" [(ngModel)]="vehiculeInforamtion.insuredInforamation.adress" #iia="ngModel"></ion-input>
              </ion-item>
              <ion-text color="danger" *ngIf="iia.invalid && (iia.dirty || iia.touched)">
                <span class="text-tiny">
                  Field required
                </span>
              </ion-text>
            </ion-col>
          </ion-row>
          
          <ion-row>
            <ion-col>
              <ion-item>
                <ion-label position="floating">Telephone input</ion-label>
                <ion-input type="tel" placeholder="+216 11 111 111" [(ngModel)]="vehiculeInforamtion.insuredInforamation.phone" required #iip="ngModel"></ion-input>
              </ion-item>

              <ion-text color="danger" *ngIf="iip.invalid && (iip.dirty || iip.touched)">
                <span class="text-tiny">
                  Field required
                </span>
              </ion-text>
            </ion-col>
          </ion-row>
          
          <h1>Vehicule Information A</h1>
          <ion-row>
            <ion-col>
              <ion-item>
                <ion-label position="floating">Brand</ion-label>
                <ion-input placeholder="Enter vehicule brand" [(ngModel)]="vehiculeInforamtion.vehicule.brand" required #vivb="ngModel"> </ion-input>
              </ion-item>
              <ion-text color="danger" *ngIf="vivb.invalid && (vivb.dirty || vivb.touched)">
                <span class="text-tiny">
                  Field required
                </span>
              </ion-text>
            </ion-col>
            <ion-col>
              <ion-item>
                <ion-label position="floating">Type</ion-label>
                <ion-input placeholder="Enter vehicule type" [(ngModel)]="vehiculeInforamtion.vehicule.type" #vivt="ngModel"></ion-input>
              </ion-item>
              <ion-text color="danger" *ngIf="vivt.invalid && (vivt.dirty || vivt.touched)">
                <span class="text-tiny">
                  Field required
                </span>
              </ion-text>
            </ion-col>
          </ion-row>
          
          <ion-row>
            <ion-col>
              <ion-item>
                <ion-label position="floating">Vehicule plate</ion-label>
                <ion-input placeholder="Enter vehicule plate" [(ngModel)]="vehiculeInforamtion.vehicule.carPlate" #vivp="ngModel"></ion-input>
              </ion-item>
              <ion-text color="danger" *ngIf="vivp.invalid && (vivp.dirty || vivp.touched)">
                <span class="text-tiny">
                  Field required
                </span>
              </ion-text>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-item>
                <ion-label position="floating">Direction</ion-label>
                <ion-input placeholder="Enter vehicule direction coming from ... going to ..." [(ngModel)]="vehiculeInforamtion.vehicule.direction" #vivd="ngModel"></ion-input>
              </ion-item>
              <ion-text color="danger" *ngIf="vivd.invalid && (vivd.dirty || vivd.touched)">
                <span class="text-tiny">
                  Field required
                </span>
              </ion-text>
            </ion-col>
          </ion-row>
          
        </div>
        <div *ngIf="slide==='Damage'">
          <h1>Apparant Damage Vehicule A</h1>
          <ion-list>
            <ion-radio-group [allowEmptySelection]="true" value="turtles" [(ngModel)]="vehiculeInforamtion.apperantDamage">
              <ion-item>
                <ion-label>Dogs</ion-label>
                <ion-radio slot="end" value="dogs"></ion-radio>
              </ion-item>
          
              <ion-item>
                <ion-label>Cats</ion-label>
                <ion-radio slot="end" value="cats"></ion-radio>
              </ion-item>
          
              <ion-item>
                <ion-label>Turtles</ion-label>
                <ion-radio slot="end" value="turtles"></ion-radio>
              </ion-item>
          
              <ion-item>
                <ion-label>Fish</ion-label>
                <ion-radio slot="end" value="fish"></ion-radio>
              </ion-item>
            </ion-radio-group>
          </ion-list>
          <ion-row>
            <ion-col>
              <ion-item>
                <ion-label position="floating">Observation</ion-label>
                <ion-input placeholder="Enter Observation " [(ngModel)]="vehiculeInforamtion.observation" #vio="ngModel"></ion-input>
              </ion-item>
              <ion-text color="danger" *ngIf="vio.invalid && (vio.dirty || vio.touched)">
                <span class="text-tiny">
                  Field required
                </span>
              </ion-text>
            </ion-col>
          </ion-row>
          
        </div>
        <div *ngIf="slide==='Sketch'">
          <h3>Sketch</h3>
          
          <div>
           
            <canvas #canvas (touchstart)="startDrawing($event)" (touchmove)="moved($event)"></canvas>
            <ion-grid>
              <ion-row>
                <ion-col size="6">
                  <ion-button color="danger" (click)="clearPad()">Clear</ion-button>
                </ion-col>
                <ion-col size="4" offset="2">
                  <ion-button color="secondary" (click)="savePad()">Save</ion-button>
                </ion-col>
              </ion-row>
            </ion-grid>
          </div>
          <ion-item *ngFor="let cir of circumstances">
            <ion-checkbox slot="start"></ion-checkbox>
            <ion-label>{{cir}}</ion-label>
          </ion-item>
          
        </div>
        <div *ngIf="slide==='Signature'">
          <h3>Signature</h3>
            <div>
              <canvas #canvas2 (touchstart)="startDrawingSignature($event)" (touchmove)="movedSignature($event)"></canvas>
              <ion-grid>
                <ion-row>
                  <ion-col size="6">
                    <ion-button color="danger" (click)="clearPadSignature()">Clear</ion-button>
                  </ion-col>
                  <ion-col size="4" offset="2">
                    <ion-button color="secondary" (click)="savePadSignature()">Save</ion-button>
                  </ion-col>
                </ion-row>
              </ion-grid>
            </div>
          </div>
      </ion-slide>
    </ng-container>
  </ion-slides>
</ion-content>
<ion-footer >
  <ion-toolbar>
    <div class="full-width flex align-items-center justify-content-space-between">
      <ion-button [style.visibility]="(isBeginning) ? 'hidden' :''" (click)="onBack()" color="dark" strong shape="round">
        <span>Back</span>
      </ion-button>
      <ion-button color="primary" [style.visibility]="(isEnding) ? 'hidden' :''" (click)="onNext()" [style.visibility]="content_visibility" strong shape="round">
        <span>Next</span>
      </ion-button>
      
    </div>
    <div *ngIf="isEnding==true && idvehiculeInformationA==-1">
      <ion-button color="primary" expand="block" (click)="setOpenQrCodeGenerator(true)" strong shape="round">
        <span>Generate qrCode</span>
      </ion-button>
    </div>
    <div *ngIf="isEnding==true && idvehiculeInformationA!=-1">
      <ion-button color="primary"  expand="block" (click)="saveConstat()" strong shape="round">
        <span>Save Constat</span>
      </ion-button>
    </div>
    <ion-modal [isOpen]="isModalOpenQrCodeGenerator">
      <ng-template>
        <ion-header>
          <ion-toolbar>
            <ion-title>Qr CODE GENRATOR</ion-title>
            <ion-buttons slot="end">
              <ion-button (click)="setOpenQrCodeGenerator(false)">Close</ion-button>
            </ion-buttons>
          </ion-toolbar>
        </ion-header>
        <ion-content class="ion-padding">
          <qrcode [qrdata]="test" [width]="256" [errorCorrectionLevel]="'M'"></qrcode>
        </ion-content>
      </ng-template>
    </ion-modal>
    <div *ngIf="isBeginning==true">
      <ion-button color="primary" expand="block"  (click)="startScan()" [style.visibility]="content_visibility" strong shape="round">
        <span>Scan qrCode</span>
      </ion-button>
    </div>
    <div *ngIf="content_visibility==='hidden'">
      <ion-button color="primary" (click)="stopScan()" strong shape="round">
        <span>Stop Scan</span>
      </ion-button>
    </div>
  </ion-toolbar>
</ion-footer>

